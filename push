#!/bin/bash          

dir_source=source
dir_templates=templates
dir_static=static

template_header=`cat $dir_templates/header.html`
template_footer=`cat $dir_templates/footer.html`
template_nav=`cat $dir_templates/nav.html`

ls $dir_source > filelist.tmp
exec 0<filelist.tmp

i=0
while read LINE
do
    array[$i]="$LINE"
    #echo $line
    cp $dir_source/$LINE $dir_static/$LINE

    sed -i -e "s/~header~/$template_header/g" $dir_static/$LINE
    sed -i -e "s/~footer~/$template_footer/g" $dir_static/$LINE
    sed -i -e "s/~nav~/$template_nav/g" $dir_static/$LINE
    rm -fr $dir_static/$LINE-e
    ((i++))
done
